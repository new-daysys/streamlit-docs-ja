import streamlit as st
import pandas as pd
import pydeck as pdk
from urllib.error import URLError

title="Mapping Demo"
st.set_page_config(page_title=title, page_icon="üåç")

st.markdown("# ", title)
st.sidebar.header("# ", title)

items_file='./items.xlsx'
sales_file='./sales.xlsx'
pd.read_excel(items_file, index_col=0)
pd.read_excel(sales_file, index_col=0)

st.sidebar.markdown("### Map Layers")
selected_layers = [
    layer
    for layer_name, layer in ALL_LAYERS.items()
    if st.sidebar.checkbox(layer_name, True)
]
if selected_layers:
    st.pydeck_chart(
        pdk.Deck(
            map_style="mapbox://styles/mapbox/light-v9",
            initial_view_state={
                "latitude": 37.76,
                "longitude": -122.4,
                "zoom": 11,
                "pitch": 50,
            },
            layers=selected_layers,
        )
    )
    else:
        st.error("Please choose at least one layer above.")
